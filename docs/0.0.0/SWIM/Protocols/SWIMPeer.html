<!DOCTYPE html>
<html lang="en">
  <head>
    <title>SWIMPeer Protocol Reference</title>
    <link rel="stylesheet" type="text/css" href="../css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="../css/highlight.css" />
    <meta charset="utf-8">
    <script src="../js/jquery.min.js" defer></script>
    <script src="../js/jazzy.js" defer></script>
    
    <script src="../js/lunr.min.js" defer></script>
    <script src="../js/typeahead.jquery.js" defer></script>
    <script src="../js/jazzy.search.js" defer></script>
  </head>
  <body>

    <a name="//apple_ref/swift/Protocol/SWIMPeer" class="dashAnchor"></a>

    <a title="SWIMPeer Protocol Reference"></a>

    <header class="header">
      <p class="header-col header-col--primary">
        <a class="header-link" href="../index.html">
          SWIM Docs
        </a>
         (96% documented)
      </p>
    
      <p class="header-col--secondary">
        <form role="search" action="../search.json">
          <input type="text" placeholder="Search documentation" data-typeahead>
        </form>
      </p>
    
        <p class="header-col header-col--secondary">
          <a class="header-link" href="https://github.com/apple/swift-cluster-membership">
            <img class="header-icon" src="../img/gh.png"/>
            View on GitHub
          </a>
        </p>
    
    </header>

    <p class="breadcrumbs">
      <a class="breadcrumb" href="../index.html">SWIM Reference</a>
      <img class="carat" src="../img/carat.png" />
      SWIMPeer Protocol Reference
    </p>

    <div class="content-wrapper">
      <nav class="navigation">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="../Documentation.html">Documentation</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Enums/SWIM.html">SWIM</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Enums/SWIM/MemberStatusChangedEvent.html">– MemberStatusChangedEvent</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Enums/SWIM/Member.html">– Member</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Enums/SWIM/PingResponse.html">– PingResponse</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Enums/SWIM/Gossip.html">– Gossip</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Enums/SWIM/GossipPayload.html">– GossipPayload</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Enums/SWIM/Instance.html">– Instance</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Enums/SWIM/Settings.html">– Settings</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Enums/SWIM/Status.html">– Status</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="../Other%20Protocols.html">Other Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Protocols/SWIMAddressablePeer.html">SWIMAddressablePeer</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Protocols/SWIMPeer.html">SWIMPeer</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Protocols/SWIMPingOriginPeer.html">SWIMPingOriginPeer</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Protocols/SWIMPingRequestOriginPeer.html">SWIMPingRequestOriginPeer</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Protocols/SWIMProtocol.html">SWIMProtocol</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="../Other%20Structs.html">Other Structures</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/SWIMGossipSettings.html">SWIMGossipSettings</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/SWIMLifeguardSettings.html">SWIMLifeguardSettings</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/_SWIMPrettyMetadataLogHandler.html">_SWIMPrettyMetadataLogHandler</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">

        <section class="section">
          <div class="section-content top-matter">
            <h1>SWIMPeer</h1>
              <div class="declaration">
                <div class="language">
                  <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">protocol</span> <span class="kt">SWIMPeer</span> <span class="p">:</span> <span class="kt"><a href="../Protocols/SWIMAddressablePeer.html">SWIMAddressablePeer</a></span></code></pre>

                </div>
              </div>
            <p>SWIM peer which can be initiated contact with, by sending ping or ping request messages.</p>

          </div>
        </section>

        <section class="section">
          <div class="section-content">
            <div class="task-group">
              <ul class="item-container">
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:4SWIM8SWIMPeerP4ping7payload4from7timeout14sequenceNumber10onResponseyA2AO13GossipPayloadO_AA18SWIMPingOriginPeer_p8Dispatch0P12TimeIntervalOs6UInt32Vys6ResultOyAJ04PingJ0Os5Error_pGctF"></a>
                    <a name="//apple_ref/swift/Method/ping(payload:from:timeout:sequenceNumber:onResponse:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:4SWIM8SWIMPeerP4ping7payload4from7timeout14sequenceNumber10onResponseyA2AO13GossipPayloadO_AA18SWIMPingOriginPeer_p8Dispatch0P12TimeIntervalOs6UInt32Vys6ResultOyAJ04PingJ0Os5Error_pGctF">ping(payload:<wbr>from:<wbr>timeout:<wbr>sequenceNumber:<wbr>onResponse:<wbr>)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Perform a probe of this peer by sending a <code>ping</code> message.</p>

<p>We expect the reply to be an <code>ack</code>, upon which the <code>onResponse</code></p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">func</span> <span class="nf">ping</span><span class="p">(</span>
    <span class="nv">payload</span><span class="p">:</span> <span class="kt"><a href="../Enums/SWIM.html">SWIM</a></span><span class="o">.</span><span class="kt">GossipPayload</span><span class="p">,</span>
    <span class="n">from</span> <span class="nv">origin</span><span class="p">:</span> <span class="kt"><a href="../Protocols/SWIMPingOriginPeer.html">SWIMPingOriginPeer</a></span><span class="p">,</span>
    <span class="nv">timeout</span><span class="p">:</span> <span class="kt">DispatchTimeInterval</span><span class="p">,</span>
    <span class="nv">sequenceNumber</span><span class="p">:</span> <span class="kt"><a href="../Enums/SWIM.html">SWIM</a></span><span class="o">.</span><span class="kt">SequenceNumber</span><span class="p">,</span>
    <span class="nv">onResponse</span><span class="p">:</span> <span class="kd">@escaping</span> <span class="p">(</span><span class="kt">Result</span><span class="o">&lt;</span><span class="kt"><a href="../Enums/SWIM.html">SWIM</a></span><span class="o">.</span><span class="kt">PingResponse</span><span class="p">,</span> <span class="kt">Error</span><span class="o">&gt;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Void</span>
<span class="p">)</span></code></pre>

                        </div>
                      </div>
                      <div>
                        <h4>Parameters</h4>
                        <table class="graybox">
                          <tbody>
                            <tr>
                              <td>
                                <code>
                                <em>payload</em>
                                </code>
                              </td>
                              <td>
                                <div>
                                  <p>additional gossip information to be processed by the recipient</p>
                                </div>
                              </td>
                            </tr>
                            <tr>
                              <td>
                                <code>
                                <em>origin</em>
                                </code>
                              </td>
                              <td>
                                <div>
                                  <p>the origin peer that has initiated this ping message (i.e. &ldquo;myself&rdquo; of the sender)
replies (<code>ack</code>s) from to this ping should be send to this peer</p>
                                </div>
                              </td>
                            </tr>
                            <tr>
                              <td>
                                <code>
                                <em>timeout</em>
                                </code>
                              </td>
                              <td>
                                <div>
                                  <p>timeout during which we expect the other peer to have replied to us with a <code>PingResponse</code> about the pinged node.
If we get no response about that peer in that time, this <code>ping</code> is considered failed, and the onResponse MUST be invoked with a <code>.timeout</code>.</p>
                                </div>
                              </td>
                            </tr>
                            <tr>
                              <td>
                                <code>
                                <em>onResponse</em>
                                </code>
                              </td>
                              <td>
                                <div>
                                  <p>must be invoked when the a corresponding reply (<code>ack</code>) or <code>timeout</code> event for this ping occurs.
No guarantees about concurrency or threading are made with regards to where/how this invocation will take place,
so implementation shells may want to hop to the right executor or protect their state using some other way when before handling the response.</p>
                                </div>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                      <div class="slightly-smaller">
                        <a href="https://github.com/apple/swift-cluster-membership/blob/0.0.0/Sources/SWIM/Peer.swift#L77">Show on GitHub</a>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:4SWIM8SWIMPeerP11pingRequest6target7payload4from7timeout14sequenceNumber10onResponseyAaB_p_A2AO13GossipPayloadOAA08SWIMPingD10OriginPeer_p8Dispatch0R12TimeIntervalOs6UInt32Vys6ResultOyAK04PingL0Os5Error_pGctF"></a>
                    <a name="//apple_ref/swift/Method/pingRequest(target:payload:from:timeout:sequenceNumber:onResponse:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:4SWIM8SWIMPeerP11pingRequest6target7payload4from7timeout14sequenceNumber10onResponseyAaB_p_A2AO13GossipPayloadOAA08SWIMPingD10OriginPeer_p8Dispatch0R12TimeIntervalOs6UInt32Vys6ResultOyAK04PingL0Os5Error_pGctF">pingRequest(target:<wbr>payload:<wbr>from:<wbr>timeout:<wbr>sequenceNumber:<wbr>onResponse:<wbr>)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Send a ping request to this peer, asking it to perform an &ldquo;indirect ping&rdquo; of the target on our behalf.</p>

<p>Any resulting acknowledgements back to us. If not acknowledgements come back from the target, the intermediary
may send back nack messages, indicating that our connection to the intermediary is intact, however we didn&rsquo;t see
acknowledgements from the target itself.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">func</span> <span class="nf">pingRequest</span><span class="p">(</span>
    <span class="nv">target</span><span class="p">:</span> <span class="kt">SWIMPeer</span><span class="p">,</span>
    <span class="nv">payload</span><span class="p">:</span> <span class="kt"><a href="../Enums/SWIM.html">SWIM</a></span><span class="o">.</span><span class="kt">GossipPayload</span><span class="p">,</span>
    <span class="n">from</span> <span class="nv">origin</span><span class="p">:</span> <span class="kt"><a href="../Protocols/SWIMPingRequestOriginPeer.html">SWIMPingRequestOriginPeer</a></span><span class="p">,</span>
    <span class="nv">timeout</span><span class="p">:</span> <span class="kt">DispatchTimeInterval</span><span class="p">,</span>
    <span class="nv">sequenceNumber</span><span class="p">:</span> <span class="kt"><a href="../Enums/SWIM.html">SWIM</a></span><span class="o">.</span><span class="kt">SequenceNumber</span><span class="p">,</span>
    <span class="nv">onResponse</span><span class="p">:</span> <span class="kd">@escaping</span> <span class="p">(</span><span class="kt">Result</span><span class="o">&lt;</span><span class="kt"><a href="../Enums/SWIM.html">SWIM</a></span><span class="o">.</span><span class="kt">PingResponse</span><span class="p">,</span> <span class="kt">Error</span><span class="o">&gt;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Void</span>
<span class="p">)</span></code></pre>

                        </div>
                      </div>
                      <div>
                        <h4>Parameters</h4>
                        <table class="graybox">
                          <tbody>
                            <tr>
                              <td>
                                <code>
                                <em>target</em>
                                </code>
                              </td>
                              <td>
                                <div>
                                  <p>target peer that should be probed by this the recipient on our behalf</p>
                                </div>
                              </td>
                            </tr>
                            <tr>
                              <td>
                                <code>
                                <em>payload</em>
                                </code>
                              </td>
                              <td>
                                <div>
                                  <p>additional gossip information to be processed by the recipient</p>
                                </div>
                              </td>
                            </tr>
                            <tr>
                              <td>
                                <code>
                                <em>origin</em>
                                </code>
                              </td>
                              <td>
                                <div>
                                  <p>the origin peer that has initiated this <code>pingRequest</code> (i.e. &ldquo;myself&rdquo; on the sender);
replies (<code>ack</code>s) from this indirect ping should be forwarded to it.</p>
                                </div>
                              </td>
                            </tr>
                            <tr>
                              <td>
                                <code>
                                <em>timeout</em>
                                </code>
                              </td>
                              <td>
                                <div>
                                  <p>timeout during which we expect the other peer to have replied to us with a <code>PingResponse</code> about the pinged node.
If we get no response about that peer in that time, this <code>pingRequest</code> is considered failed, and the onResponse MUST be invoked with a <code>.timeout</code>.</p>
                                </div>
                              </td>
                            </tr>
                            <tr>
                              <td>
                                <code>
                                <em>onResponse</em>
                                </code>
                              </td>
                              <td>
                                <div>
                                  <p>must be invoked when the a corresponding reply (ack, nack) or timeout event for this ping request occurs.
No guarantees about concurrency or threading are made with regards to where/how this invocation will take place,
so implementation shells may want to hop to the right executor or protect their state using some other way when before handling the response.</p>
                                </div>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                      <div class="slightly-smaller">
                        <a href="https://github.com/apple/swift-cluster-membership/blob/0.0.0/Sources/SWIM/Peer.swift#L101">Show on GitHub</a>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
          </div>
        </section>

      </article>
    </div>
    <section class="footer">
      <p>&copy; 2020 <a class="link" href="https://github.com/apple/swift-cluster-membership" target="_blank" rel="external">Swift Cluster Membership Team</a>. All rights reserved. (Last updated: 2020-08-27)</p>
      <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.13.3</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external">Realm</a> project.</p>
    </section>
  </body>
</div>
</html>
