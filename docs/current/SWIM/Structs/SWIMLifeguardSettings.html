<!DOCTYPE html>
<html lang="en">
  <head>
    <title>SWIMLifeguardSettings Structure Reference</title>
    <link rel="stylesheet" type="text/css" href="../css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="../css/highlight.css" />
    <meta charset="utf-8">
    <script src="../js/jquery.min.js" defer></script>
    <script src="../js/jazzy.js" defer></script>
    
    <script src="../js/lunr.min.js" defer></script>
    <script src="../js/typeahead.jquery.js" defer></script>
    <script src="../js/jazzy.search.js" defer></script>
  </head>
  <body>

    <a name="//apple_ref/swift/Struct/SWIMLifeguardSettings" class="dashAnchor"></a>

    <a title="SWIMLifeguardSettings Structure Reference"></a>

    <header class="header">
      <p class="header-col header-col--primary">
        <a class="header-link" href="../index.html">
          SWIM Docs
        </a>
         (96% documented)
      </p>
    
      <p class="header-col--secondary">
        <form role="search" action="../search.json">
          <input type="text" placeholder="Search documentation" data-typeahead>
        </form>
      </p>
    
        <p class="header-col header-col--secondary">
          <a class="header-link" href="https://github.com/apple/swift-cluster-membership">
            <img class="header-icon" src="../img/gh.png"/>
            View on GitHub
          </a>
        </p>
    
    </header>

    <p class="breadcrumbs">
      <a class="breadcrumb" href="../index.html">SWIM Reference</a>
      <img class="carat" src="../img/carat.png" />
      SWIMLifeguardSettings Structure Reference
    </p>

    <div class="content-wrapper">
      <nav class="navigation">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="../Documentation.html">Documentation</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Enums/SWIM.html">SWIM</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Enums/SWIM/MemberStatusChangedEvent.html">– MemberStatusChangedEvent</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Enums/SWIM/Member.html">– Member</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Enums/SWIM/PingResponse.html">– PingResponse</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Enums/SWIM/Gossip.html">– Gossip</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Enums/SWIM/GossipPayload.html">– GossipPayload</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Enums/SWIM/Instance.html">– Instance</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Enums/SWIM/Settings.html">– Settings</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Enums/SWIM/Status.html">– Status</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="../Other%20Protocols.html">Other Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Protocols/SWIMAddressablePeer.html">SWIMAddressablePeer</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Protocols/SWIMPeer.html">SWIMPeer</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Protocols/SWIMPingOriginPeer.html">SWIMPingOriginPeer</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Protocols/SWIMPingRequestOriginPeer.html">SWIMPingRequestOriginPeer</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Protocols/SWIMProtocol.html">SWIMProtocol</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="../Other%20Structs.html">Other Structures</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/SWIMGossipSettings.html">SWIMGossipSettings</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/SWIMLifeguardSettings.html">SWIMLifeguardSettings</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/_SWIMPrettyMetadataLogHandler.html">_SWIMPrettyMetadataLogHandler</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">

        <section class="section">
          <div class="section-content top-matter">
            <h1>SWIMLifeguardSettings</h1>
              <div class="declaration">
                <div class="language">
                  <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">struct</span> <span class="kt">SWIMLifeguardSettings</span></code></pre>

                </div>
              </div>
            <p>Lifeguard is a set of extensions to SWIM that helps reducing false positive failure detections.</p>
<div class="aside aside-see-also">
    <p class="aside-title">See also</p>
    <a href="https://arxiv.org/pdf/1707.00788.pdf">Lifeguard: Local Health Awareness for More Accurate Failure Detection</a>

</div>

          </div>
        </section>

        <section class="section">
          <div class="section-content">
            <div class="task-group">
              <ul class="item-container">
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:4SWIM21SWIMLifeguardSettingsVACycfc"></a>
                    <a name="//apple_ref/swift/Method/init()" class="dashAnchor"></a>
                    <a class="token" href="#/s:4SWIM21SWIMLifeguardSettingsVACycfc">init()</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Create default settings.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">public</span> <span class="nf">init</span><span class="p">()</span></code></pre>

                        </div>
                      </div>
                      <div class="slightly-smaller">
                        <a href="https://github.com/apple/swift-cluster-membership/blob/0.0.0/Sources/SWIM/Settings.swift#L223">Show on GitHub</a>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:4SWIM21SWIMLifeguardSettingsV24maxLocalHealthMultiplierSivp"></a>
                    <a name="//apple_ref/swift/Property/maxLocalHealthMultiplier" class="dashAnchor"></a>
                    <a class="token" href="#/s:4SWIM21SWIMLifeguardSettingsV24maxLocalHealthMultiplierSivp">maxLocalHealthMultiplier</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Local health multiplier is a part of Lifeguard extensions to SWIM.
It will increase local probe interval and probe timeout if the instance is not processing messages in timely manner.
This property will define the upper limit to local health multiplier.</p>

<p>Must be greater than 0. To effectively disable the LHM extension you may set this to <code>1</code>.</p>
<div class="aside aside-see-also">
    <p class="aside-title">See also</p>
    <a href="https://arxiv.org/pdf/1707.00788.pdf">Lifeguard IV.A. Local Health Multiplier (LHM)</a>

</div>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">public</span> <span class="k">var</span> <span class="nv">maxLocalHealthMultiplier</span><span class="p">:</span> <span class="kt">Int</span> <span class="p">{</span> <span class="k">get</span> <span class="k">set</span> <span class="p">}</span></code></pre>

                        </div>
                      </div>
                      <div class="slightly-smaller">
                        <a href="https://github.com/apple/swift-cluster-membership/blob/0.0.0/Sources/SWIM/Settings.swift#L232-L236">Show on GitHub</a>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:4SWIM21SWIMLifeguardSettingsV19suspicionTimeoutMax8Dispatch0G12TimeIntervalOvp"></a>
                    <a name="//apple_ref/swift/Property/suspicionTimeoutMax" class="dashAnchor"></a>
                    <a class="token" href="#/s:4SWIM21SWIMLifeguardSettingsV19suspicionTimeoutMax8Dispatch0G12TimeIntervalOvp">suspicionTimeoutMax</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Suspicion timeouts are specified as number of probe intervals.</p>

<p>E.g. a <code>suspicionTimeoutMax = .seconds(10)</code> means that a suspicious node will be escalated as <code>.unreachable</code>  at most after approximately 10 seconds. Suspicion timeout will decay logarithmically to <code><a href="../Structs/SWIMLifeguardSettings.html#/s:4SWIM21SWIMLifeguardSettingsV19suspicionTimeoutMin8Dispatch0G12TimeIntervalOvp">suspicionTimeoutMin</a></code>
with additional suspicions arriving. When no additional suspicions present, suspicion timeout will equal <code>suspicionTimeoutMax</code></p>
<h3 id='modification' class='heading'>Modification:</h3>

<p>We introduce an extra state of &ldquo;unreachable&rdquo; is introduced, which is signalled to a high-level membership implementation,
which may then confirm it, then leading the SWIM membership to mark the given member as <code>.dead</code>. Unlike the original SWIM/Lifeguard
implementations which proceed to <code>.dead</code> automatically. This separation allows running with SWIM failure detection in an &ldquo;informational&rdquo;
mode.</p>

<p>Once it is confirmed dead by the high-level membership (e.g. immediately, or after an additional grace period, or vote),
it will be marked <code>.dead</code> in SWIM, and <code>.down</code> in the high-level membership.</p>
<div class="aside aside-see-also">
    <p class="aside-title">See also</p>
    <a href="https://arxiv.org/pdf/1707.00788.pdf">Lifeguard IV.B. Local Health Aware Suspicion (LHA-Suspicion)</a>

</div>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">public</span> <span class="k">var</span> <span class="nv">suspicionTimeoutMax</span><span class="p">:</span> <span class="kt">DispatchTimeInterval</span> <span class="p">{</span> <span class="k">get</span> <span class="k">set</span> <span class="p">}</span></code></pre>

                        </div>
                      </div>
                      <div class="slightly-smaller">
                        <a href="https://github.com/apple/swift-cluster-membership/blob/0.0.0/Sources/SWIM/Settings.swift#L253-L257">Show on GitHub</a>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:4SWIM21SWIMLifeguardSettingsV29indirectPingTimeoutMultiplierSdvp"></a>
                    <a name="//apple_ref/swift/Property/indirectPingTimeoutMultiplier" class="dashAnchor"></a>
                    <a class="token" href="#/s:4SWIM21SWIMLifeguardSettingsV29indirectPingTimeoutMultiplierSdvp">indirectPingTimeoutMultiplier</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>To ensure ping origin have time to process .nack, indirect ping timeout should always be shorter than originator&rsquo;s timeout
This property controls a multiplier that&rsquo;s applied to <code>pingTimeout</code> when calculating indirect probe timeout.
The default of 80% follows a proposal in the initial paper.
The value should be between 0 and 1 (exclusive).</p>
<div class="aside aside-see-also">
    <p class="aside-title">See also</p>
    <code>pingTimeout</code>

</div><div class="aside aside-see-also">
    <p class="aside-title">See also</p>
    <a href="https://arxiv.org/pdf/1707.00788.pdf">Lifeguard IV.B. Local Health Aware Suspicion (LHA-Suspicion)</a>

</div>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">public</span> <span class="k">var</span> <span class="nv">indirectPingTimeoutMultiplier</span><span class="p">:</span> <span class="kt">Double</span> <span class="p">{</span> <span class="k">get</span> <span class="k">set</span> <span class="p">}</span></code></pre>

                        </div>
                      </div>
                      <div class="slightly-smaller">
                        <a href="https://github.com/apple/swift-cluster-membership/blob/0.0.0/Sources/SWIM/Settings.swift#L266-L271">Show on GitHub</a>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:4SWIM21SWIMLifeguardSettingsV19suspicionTimeoutMin8Dispatch0G12TimeIntervalOvp"></a>
                    <a name="//apple_ref/swift/Property/suspicionTimeoutMin" class="dashAnchor"></a>
                    <a class="token" href="#/s:4SWIM21SWIMLifeguardSettingsV19suspicionTimeoutMin8Dispatch0G12TimeIntervalOvp">suspicionTimeoutMin</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Suspicion timeouts are specified as number of probe intervals.</p>

<p>E.g. a <code>suspicionTimeoutMin = .seconds(3)</code> means that a suspicious node will be escalated as <code>.unreachable</code> at least after approximately 3 seconds.
Suspicion timeout will decay logarithmically from <code><a href="../Structs/SWIMLifeguardSettings.html#/s:4SWIM21SWIMLifeguardSettingsV19suspicionTimeoutMax8Dispatch0G12TimeIntervalOvp">suspicionTimeoutMax</a></code> / with additional suspicions arriving.
When number of suspicions reach <code><a href="../Structs/SWIMLifeguardSettings.html#/s:4SWIM21SWIMLifeguardSettingsV24maxIndependentSuspicionsSivp">maxIndependentSuspicions</a></code>, suspicion timeout will equal <code>suspicionTimeoutMin</code></p>
<h3 id='modification' class='heading'>Modification:</h3>

<p>An extra state of &ldquo;unreachable&rdquo; is introduced, which is signalled to a high-level membership implementation,
which may then confirm it, then leading the SWIM membership to mark the given member as <code>.dead</code>. Unlike the original SWIM/Lifeguard
implementations which proceed to <code>.dead</code> automatically. This separation allows running with SWIM failure detection in an &ldquo;informational&rdquo;
mode.</p>

<p>Once it is confirmed dead by the high-level membership (e.g. immediately, or after an additional grace period, or vote),
it will be marked <code>.dead</code> in swim, and <code>.down</code> in the high-level membership.</p>
<div class="aside aside-see-also">
    <p class="aside-title">See also</p>
    <a href="https://arxiv.org/pdf/1707.00788.pdf">Lifeguard IV.B. Local Health Aware Suspicion (LHA-Suspicion)</a>

</div>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">public</span> <span class="k">var</span> <span class="nv">suspicionTimeoutMin</span><span class="p">:</span> <span class="kt">DispatchTimeInterval</span> <span class="p">{</span> <span class="k">get</span> <span class="k">set</span> <span class="p">}</span></code></pre>

                        </div>
                      </div>
                      <div class="slightly-smaller">
                        <a href="https://github.com/apple/swift-cluster-membership/blob/0.0.0/Sources/SWIM/Settings.swift#L289-L293">Show on GitHub</a>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:4SWIM21SWIMLifeguardSettingsV24maxIndependentSuspicionsSivp"></a>
                    <a name="//apple_ref/swift/Property/maxIndependentSuspicions" class="dashAnchor"></a>
                    <a class="token" href="#/s:4SWIM21SWIMLifeguardSettingsV24maxIndependentSuspicionsSivp">maxIndependentSuspicions</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>A number of independent suspicions required for a suspicion timeout to fully decay to a minimal value.</p>

<p>When set to 1 will effectively disable LHA-suspicion.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">public</span> <span class="k">var</span> <span class="nv">maxIndependentSuspicions</span><span class="p">:</span> <span class="kt">Int</span> <span class="p">{</span> <span class="k">get</span> <span class="k">set</span> <span class="p">}</span></code></pre>

                        </div>
                      </div>
                      <div class="slightly-smaller">
                        <a href="https://github.com/apple/swift-cluster-membership/blob/0.0.0/Sources/SWIM/Settings.swift#L298-L302">Show on GitHub</a>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
          </div>
        </section>

      </article>
    </div>
    <section class="footer">
      <p>&copy; 2020 <a class="link" href="https://github.com/apple/swift-cluster-membership" target="_blank" rel="external">Swift Cluster Membership Team</a>. All rights reserved. (Last updated: 2020-08-27)</p>
      <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.13.3</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external">Realm</a> project.</p>
    </section>
  </body>
</div>
</html>
