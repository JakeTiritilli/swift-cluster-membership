<!DOCTYPE html>
<html lang="en">
  <head>
    <title>SWIM Enumeration Reference</title>
    <link rel="stylesheet" type="text/css" href="../css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="../css/highlight.css" />
    <meta charset="utf-8">
    <script src="../js/jquery.min.js" defer></script>
    <script src="../js/jazzy.js" defer></script>
    
    <script src="../js/lunr.min.js" defer></script>
    <script src="../js/typeahead.jquery.js" defer></script>
    <script src="../js/jazzy.search.js" defer></script>
  </head>
  <body>

    <a name="//apple_ref/swift/Enum/SWIM" class="dashAnchor"></a>

    <a title="SWIM Enumeration Reference"></a>

    <header class="header">
      <p class="header-col header-col--primary">
        <a class="header-link" href="../index.html">
          SWIM Docs
        </a>
         (96% documented)
      </p>
    
      <p class="header-col--secondary">
        <form role="search" action="../search.json">
          <input type="text" placeholder="Search documentation" data-typeahead>
        </form>
      </p>
    
        <p class="header-col header-col--secondary">
          <a class="header-link" href="https://github.com/apple/swift-cluster-membership">
            <img class="header-icon" src="../img/gh.png"/>
            View on GitHub
          </a>
        </p>
    
    </header>

    <p class="breadcrumbs">
      <a class="breadcrumb" href="../index.html">SWIM Reference</a>
      <img class="carat" src="../img/carat.png" />
      SWIM Enumeration Reference
    </p>

    <div class="content-wrapper">
      <nav class="navigation">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="../Documentation.html">Documentation</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Enums/SWIM.html">SWIM</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Enums/SWIM/MemberStatusChangedEvent.html">– MemberStatusChangedEvent</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Enums/SWIM/Member.html">– Member</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Enums/SWIM/PingResponse.html">– PingResponse</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Enums/SWIM/Gossip.html">– Gossip</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Enums/SWIM/GossipPayload.html">– GossipPayload</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Enums/SWIM/Instance.html">– Instance</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Enums/SWIM/Settings.html">– Settings</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Enums/SWIM/Status.html">– Status</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="../Other%20Protocols.html">Other Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Protocols/SWIMAddressablePeer.html">SWIMAddressablePeer</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Protocols/SWIMPeer.html">SWIMPeer</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Protocols/SWIMPingOriginPeer.html">SWIMPingOriginPeer</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Protocols/SWIMPingRequestOriginPeer.html">SWIMPingRequestOriginPeer</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Protocols/SWIMProtocol.html">SWIMProtocol</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="../Other%20Structs.html">Other Structures</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/SWIMGossipSettings.html">SWIMGossipSettings</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/SWIMLifeguardSettings.html">SWIMLifeguardSettings</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/_SWIMPrettyMetadataLogHandler.html">_SWIMPrettyMetadataLogHandler</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">

        <section class="section">
          <div class="section-content top-matter">
            <h1>SWIM</h1>
              <div class="declaration">
                <div class="language">
                  <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">enum</span> <span class="kt">SWIM</span></code></pre>

                </div>
              </div>
            <h2 id='scalable-weakly-consistent-infection-style-process-group-membership-protocol' class='heading'>Scalable Weakly-consistent Infection-style Process Group Membership Protocol</h2>

<blockquote>
<p>As you swim lazily through the milieu, <br/>
The secrets of the world will infect you.</p>
</blockquote>

<p>Implementation of the SWIM protocol in abstract terms, not dependent on any specific runtime.
The actual implementation resides in <code><a href="../Enums/SWIM/Instance.html">SWIM.Instance</a></code>.</p>
<h3 id='terminology' class='heading'>Terminology</h3>

<p>This implementation follows the original terminology mostly directly, with the notable exception of the original
wording of &ldquo;confirm&rdquo; being rather represented as <code><a href="../Enums/SWIM/Status.html#/s:4SWIMAAO6StatusO4deadyA2DmF">SWIM.Status.dead</a></code>, as we found the &ldquo;confirm&rdquo; wording to be
confusing in practice.</p>
<h3 id='extensions-amp-modifications' class='heading'>Extensions &amp; Modifications</h3>

<p>This implementation has a few notable extensions and modifications implemented, some documented already in the initial
SWIM paper, some in the Lifeguard extensions paper and some being simple adjustments we found practical in our environments.</p>

<ul>
<li><p>The &ldquo;random peer selection&rdquo; is not completely ad-hoc random, but follows a <em>stable order</em>, randomized on peer insertion.</p>

<ul>
<li>Unlike the completely random selection in the original paper. This has the benefit of consistently going &ldquo;around&rdquo;
all peers participating in the cluster, enabling a more efficient spread of membership information among peers,
by allowing us to avoid continuously (yet randomly) selecting the same few peers.</li>
<li>This optimization is described in the original SWIM paper, and followed by some implementations.</li>
</ul></li>
<li><p>Introduction of an <code>.unreachable</code> status, that is ordered after <code>.suspect</code> and before <code>.dead</code>.</p>

<ul>
<li>This is because the decision to move an unreachable peer to .dead status is a large and important decision,
in which user code may want to participate, e.g. by attempting &ldquo;shoot the other peer in the head&rdquo; or other patterns,
before triggering the <code>.dead</code> status (which usually implies a complete removal of information of that peer existence from the cluster),
after which no further communication with given peer will ever be possible anymore.</li>
<li>The <code>.unreachable</code> status is optional and <em>disabled</em> by default.</li>
<li>Other SWIM implementations handle this problem by <em>storing</em> dead members for a period of time after declaring them dead,
also deviating from the original paper; so we conclude that this use case is quite common and allow addressing it in various ways.</li>
</ul></li>
<li><p>Preservation of <code>.unreachable</code> information</p>

<ul>
<li>The original paper does not keep in memory information about dead peers,
it only gossips the information that a member is now dead, but does not keep tombstones for later reference</li>
</ul></li>
</ul>

<p>Implementations of extensions documented in the Lifeguard paper (linked below):</p>

<ul>
<li>Local Health Aware Probe - which replaces the static timeouts in probing with a dynamic one, taking into account
recent communication failures of our member with others.</li>
<li>Local Health Aware Suspicion - which improves the way <code>.suspect</code> states and their timeouts are handled,
effectively relying on more information about unreachability; See: <code>suspicionTimeout</code></li>
<li>Buddy System - enables members to directly and immediately notify suspect peers about them being suspected,
such that they have more time and a chance to refute these suspicions more quickly, rather than relying on completely
random gossip for that suspicion information to reach such suspect peer.</li>
</ul>

<p>SWIM serves as a low-level distributed failure detector mechanism.
It also maintains its own membership in order to monitor and select peers to ping with periodic health checks,
however this membership is not directly the same as the high-level membership exposed by the <code>Cluster</code>.</p>
<h3 id='swim-membership' class='heading'>SWIM Membership</h3>

<p>SWIM provides a weakly consistent view on the process group membership.
Membership in this context means that we have some knowledge about the node, that was acquired by either
communicating with the peer directly, for example when initially connecting to the cluster,
or because some other peer shared information about it with us.
To avoid moving a peer &ldquo;back&rdquo; into alive or suspect state because of older statuses that get replicated,
we need to be able put them into temporal order. For this reason each peer has an incarnation number assigned to it.</p>

<p>This number is monotonically increasing and can only be incremented by the respective peer itself and only if it is
suspected by another peer in its current incarnation.</p>

<p>The ordering of statuses is as follows:</p>
<pre class="highlight swift"><code><span class="nf">alive</span><span class="p">(</span><span class="kt">N</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nf">suspect</span><span class="p">(</span><span class="kt">N</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nf">alive</span><span class="p">(</span><span class="kt">N</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nf">suspect</span><span class="p">(</span><span class="kt">N</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">dead</span>
</code></pre>

<p>A member that has been declared dead can <em>never</em> return from that status and has to be restarted to join the cluster.
Note that such &ldquo;restarted node&rdquo; from SWIM&rsquo;s perspective is simply a new node which happens to occupy the same host/port,
as nodes are identified by their unique identifiers (<code>ClusterMembership.Node.uid</code>).</p>

<p>The information about dead nodes will be kept for a configurable amount of time, after which it will be removed to
prevent the state on each node from growing too big. The timeout value should be chosen to be big enough to prevent
faulty nodes from re-joining the cluster and is usually in the order of a few days.</p>
<h3 id='swim-gossip' class='heading'>SWIM Gossip</h3>

<p>SWIM uses an infection style gossip mechanism to replicate state across the cluster.
The gossip payload contains information about other node’s observed status, and will be disseminated throughout the
cluster by piggybacking onto periodic health check messages, i.e. whenever a node is sending a ping, a ping request,
or is responding with an acknowledgement, it will include the latest gossip with that message as well. When a node
receives gossip, it has to apply the statuses to its local state according to the ordering stated above. If a node
receives gossip about itself, it has to react accordingly.</p>

<p>If it is suspected by another peer in its current incarnation, it has to increment its incarnation in response.
If it has been marked as dead, it SHOULD to shut itself down (i.e. terminate the entire node / service), to avoid &ldquo;zombie&rdquo;
nodes staying around even through they are already ejected from the cluster.</p>
<h3 id='swim-protocol-logic-implementation' class='heading'>SWIM Protocol Logic Implementation</h3>
<div class="aside aside-see-also">
    <p class="aside-title">See also</p>
    <code><a href="../Enums/SWIM/Instance.html">SWIM.Instance</a></code> for a detailed discussion on the implementation.

</div>
<h3 id='further-reading' class='heading'>Further Reading</h3>
<div class="aside aside-see-also">
    <p class="aside-title">See also</p>
    <a href="https://www.cs.cornell.edu/projects/Quicksilver/public_pdfs/SWIM.pdf">SWIM: Scalable Weakly-consistent Infection-style Process Group Membership Protocol</a>

</div><div class="aside aside-see-also">
    <p class="aside-title">See also</p>
    <a href="https://arxiv.org/abs/1707.00788">Lifeguard: Local Health Awareness for More Accurate Failure Detection</a>

</div>

          </div>
        </section>

        <section class="section">
          <div class="section-content">
            <div class="task-group">
              <ul class="item-container">
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:4SWIMAAO24MemberStatusChangedEventV"></a>
                    <a name="//apple_ref/swift/Struct/MemberStatusChangedEvent" class="dashAnchor"></a>
                    <a class="token" href="#/s:4SWIMAAO24MemberStatusChangedEventV">MemberStatusChangedEvent</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Emitted whenever a membership change happens.</p>

<p>Use <code>isReachabilityChange</code> to detect whether the is a change from an alive to unreachable/dead state or not,
and is worth emitting to user-code or not.</p>

                        <a href="../Enums/SWIM/MemberStatusChangedEvent.html" class="slightly-smaller">See more</a>
                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">struct</span> <span class="kt">MemberStatusChangedEvent</span> <span class="p">:</span> <span class="kt">Equatable</span></code></pre>
<pre class="highlight swift"><code><span class="kd">extension</span> <span class="kt"><a href="../Enums/SWIM.html">SWIM</a></span><span class="o">.</span><span class="kt">MemberStatusChangedEvent</span><span class="p">:</span> <span class="kt">CustomStringConvertible</span></code></pre>

                        </div>
                      </div>
                      <div class="slightly-smaller">
                        <a href="https://github.com/apple/swift-cluster-membership/blob/0.0.0/Sources/SWIM/Events.swift#L24-L58">Show on GitHub</a>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
            <div class="task-group">
              <div class="task-name-container">
                <a name="/SWIM%20Member"></a>
                <a name="//apple_ref/swift/Section/SWIM Member" class="dashAnchor"></a>
                <div class="section-name-container">
                  <a class="section-name-link" href="#/SWIM%20Member"></a>
                  <h3 class="section-name"><p>SWIM Member</p>
</h3>
                </div>
              </div>
              <ul class="item-container">
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:4SWIMAAO6MemberV"></a>
                    <a name="//apple_ref/swift/Struct/Member" class="dashAnchor"></a>
                    <a class="token" href="#/s:4SWIMAAO6MemberV">Member</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>A <code>SWIM.Member</code> represents an active participant of the cluster.</p>

<p>It associates a specific <code><a href="../Protocols/SWIMAddressablePeer.html">SWIMAddressablePeer</a></code> with its <code><a href="../Enums/SWIM/Status.html">SWIM.Status</a></code> and a number of other SWIM specific state information.</p>

                        <a href="../Enums/SWIM/Member.html" class="slightly-smaller">See more</a>
                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">struct</span> <span class="kt">Member</span></code></pre>
<pre class="highlight swift"><code><span class="kd">extension</span> <span class="kt"><a href="../Enums/SWIM.html">SWIM</a></span><span class="o">.</span><span class="kt">Member</span><span class="p">:</span> <span class="kt">Hashable</span><span class="p">,</span> <span class="kt">Equatable</span></code></pre>
<pre class="highlight swift"><code><span class="kd">extension</span> <span class="kt"><a href="../Enums/SWIM.html">SWIM</a></span><span class="o">.</span><span class="kt">Member</span><span class="p">:</span> <span class="kt">CustomStringConvertible</span></code></pre>

                        </div>
                      </div>
                      <div class="slightly-smaller">
                        <a href="https://github.com/apple/swift-cluster-membership/blob/0.0.0/Sources/SWIM/Member.swift#L25-L83">Show on GitHub</a>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:4SWIMAAO11Incarnationa"></a>
                    <a name="//apple_ref/swift/Alias/Incarnation" class="dashAnchor"></a>
                    <a class="token" href="#/s:4SWIMAAO11Incarnationa">Incarnation</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Incarnation numbers serve as sequence number and used to determine which observation
is &ldquo;more recent&rdquo; when comparing gossiped information.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">typealias</span> <span class="kt">Incarnation</span> <span class="o">=</span> <span class="kt">UInt64</span></code></pre>

                        </div>
                      </div>
                      <div class="slightly-smaller">
                        <a href="https://github.com/apple/swift-cluster-membership/blob/0.0.0/Sources/SWIM/SWIM.swift#L22">Show on GitHub</a>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:4SWIMAAO14SequenceNumbera"></a>
                    <a name="//apple_ref/swift/Alias/SequenceNumber" class="dashAnchor"></a>
                    <a class="token" href="#/s:4SWIMAAO14SequenceNumbera">SequenceNumber</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>A sequence number which can be used to associate with messages in order to establish an request/response
relationship between ping/pingRequest and their corresponding ack/nack messages.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">typealias</span> <span class="kt">SequenceNumber</span> <span class="o">=</span> <span class="kt">UInt32</span></code></pre>

                        </div>
                      </div>
                      <div class="slightly-smaller">
                        <a href="https://github.com/apple/swift-cluster-membership/blob/0.0.0/Sources/SWIM/SWIM.swift#L26">Show on GitHub</a>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:4SWIMAAO10Membershipa"></a>
                    <a name="//apple_ref/swift/Alias/Membership" class="dashAnchor"></a>
                    <a class="token" href="#/s:4SWIMAAO10Membershipa">Membership</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Typealias for the underlying membership representation.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">typealias</span> <span class="kt">Membership</span> <span class="o">=</span> <span class="kt">Dictionary</span><span class="o">&lt;</span><span class="kt">Node</span><span class="p">,</span> <span class="kt">SWIM</span><span class="o">.</span><span class="kt"><a href="../Enums/SWIM/Member.html">Member</a></span><span class="o">&gt;.</span><span class="kt">Values</span></code></pre>

                        </div>
                      </div>
                      <div class="slightly-smaller">
                        <a href="https://github.com/apple/swift-cluster-membership/blob/0.0.0/Sources/SWIM/SWIM.swift#L29">Show on GitHub</a>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:4SWIMAAO12PingResponseO"></a>
                    <a name="//apple_ref/swift/Enum/PingResponse" class="dashAnchor"></a>
                    <a class="token" href="#/s:4SWIMAAO12PingResponseO">PingResponse</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Message sent in reply to a <code>.ping</code>.</p>

<p>The ack may be delivered directly in a request-response fashion between the probing and pinged members,
or indirectly, as a result of a <code>pingRequest</code> message.</p>

                        <a href="../Enums/SWIM/PingResponse.html" class="slightly-smaller">See more</a>
                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">enum</span> <span class="kt">PingResponse</span></code></pre>

                        </div>
                      </div>
                      <div class="slightly-smaller">
                        <a href="https://github.com/apple/swift-cluster-membership/blob/0.0.0/Sources/SWIM/SWIM.swift#L37-L101">Show on GitHub</a>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
            <div class="task-group">
              <div class="task-name-container">
                <a name="/Gossip"></a>
                <a name="//apple_ref/swift/Section/Gossip" class="dashAnchor"></a>
                <div class="section-name-container">
                  <a class="section-name-link" href="#/Gossip"></a>
                  <h3 class="section-name"><p>Gossip</p>
</h3>
                </div>
              </div>
              <ul class="item-container">
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:4SWIMAAO6GossipV"></a>
                    <a name="//apple_ref/swift/Struct/Gossip" class="dashAnchor"></a>
                    <a class="token" href="#/s:4SWIMAAO6GossipV">Gossip</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>A piece of &ldquo;gossip&rdquo; about a specific member of the cluster.</p>

<p>A gossip will only be spread a limited number of times, as configured by <code>settings.gossip.gossipedEnoughTimes(_:members:)</code>.</p>

                        <a href="../Enums/SWIM/Gossip.html" class="slightly-smaller">See more</a>
                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">struct</span> <span class="kt">Gossip</span> <span class="p">:</span> <span class="kt">Equatable</span></code></pre>

                        </div>
                      </div>
                      <div class="slightly-smaller">
                        <a href="https://github.com/apple/swift-cluster-membership/blob/0.0.0/Sources/SWIM/SWIM.swift#L111-L118">Show on GitHub</a>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:4SWIMAAO13GossipPayloadO"></a>
                    <a name="//apple_ref/swift/Enum/GossipPayload" class="dashAnchor"></a>
                    <a class="token" href="#/s:4SWIMAAO13GossipPayloadO">GossipPayload</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>A <code>GossipPayload</code> is used to spread gossips about members.</p>

                        <a href="../Enums/SWIM/GossipPayload.html" class="slightly-smaller">See more</a>
                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">enum</span> <span class="kt">GossipPayload</span></code></pre>

                        </div>
                      </div>
                      <div class="slightly-smaller">
                        <a href="https://github.com/apple/swift-cluster-membership/blob/0.0.0/Sources/SWIM/SWIM.swift#L121-L128">Show on GitHub</a>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:4SWIMAAO8InstanceC"></a>
                    <a name="//apple_ref/swift/Class/Instance" class="dashAnchor"></a>
                    <a class="token" href="#/s:4SWIMAAO8InstanceC">Instance</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>The <code>SWIM.Instance</code> encapsulates the complete algorithm implementation of the <code><a href="../Enums/SWIM.html">SWIM</a></code> protocol.</p>

<p><strong>Please refer to <code><a href="../Enums/SWIM.html">SWIM</a></code> for an in-depth discussion of the algorithm and extensions implemented in this package.</strong></p>
<div class="aside aside-see-also">
    <p class="aside-title">See also</p>
    <code><a href="../Enums/SWIM.html">SWIM</a></code> for a complete and in depth discussion of the protocol.

</div>

                        <a href="../Enums/SWIM/Instance.html" class="slightly-smaller">See more</a>
                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="kt">Instance</span> <span class="p">:</span> <span class="kt"><a href="../Protocols/SWIMProtocol.html">SWIMProtocol</a></span></code></pre>
<pre class="highlight swift"><code><span class="kd">extension</span> <span class="kt"><a href="../Enums/SWIM.html">SWIM</a></span><span class="o">.</span><span class="kt">Instance</span><span class="p">:</span> <span class="kt">CustomDebugStringConvertible</span></code></pre>

                        </div>
                      </div>
                      <div class="slightly-smaller">
                        <a href="https://github.com/apple/swift-cluster-membership/blob/0.0.0/Sources/SWIM/SWIMInstance.swift#L236-L701">Show on GitHub</a>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
            <div class="task-group">
              <div class="task-name-container">
                <a name="/SWIM%20Settings"></a>
                <a name="//apple_ref/swift/Section/SWIM Settings" class="dashAnchor"></a>
                <div class="section-name-container">
                  <a class="section-name-link" href="#/SWIM%20Settings"></a>
                  <h3 class="section-name"><p>SWIM Settings</p>
</h3>
                </div>
              </div>
              <ul class="item-container">
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:4SWIMAAO8SettingsV"></a>
                    <a name="//apple_ref/swift/Struct/Settings" class="dashAnchor"></a>
                    <a class="token" href="#/s:4SWIMAAO8SettingsV">Settings</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Settings generally applicable to the SWIM implementation as well as any shell running it.</p>

                        <a href="../Enums/SWIM/Settings.html" class="slightly-smaller">See more</a>
                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">struct</span> <span class="kt">Settings</span></code></pre>

                        </div>
                      </div>
                      <div class="slightly-smaller">
                        <a href="https://github.com/apple/swift-cluster-membership/blob/0.0.0/Sources/SWIM/Settings.swift#L31-L162">Show on GitHub</a>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:4SWIMAAO6StatusO"></a>
                    <a name="//apple_ref/swift/Enum/Status" class="dashAnchor"></a>
                    <a class="token" href="#/s:4SWIMAAO6StatusO">Status</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>The SWIM membership status reflects how a node is perceived by the distributed failure detector.</p>
<h3 id='modification-unreachable-status-opt-in' class='heading'>Modification: Unreachable status (opt-in)</h3>

<p>If the unreachable status extension is enabled, it is set / when a classic SWIM implementation would have
declared a node <code>.dead</code>, / yet since we allow for the higher level membership to decide when and how to eject
members from a cluster, / only the <code>.unreachable</code> state is set and an <code>Cluster.ReachabilityChange</code> cluster event
is emitted. / In response to this a high-level membership protocol MAY confirm the node as dead by issuing
<code>Instance.confirmDead</code>, / which will promote the node to <code>.dead</code> in SWIM terms.</p>

<blockquote>
<p>The additional <code>.unreachable</code> status is only used it enabled explicitly by setting <code>settings.unreachable</code>
to enabled. Otherwise, the implementation performs its failure checking as usual and directly marks detected
to be failed members as <code>.dead</code>.</p>
</blockquote>
<h3 id='legal-transitions' class='heading'>Legal transitions:</h3>

<ul>
<li><code>alive -&gt; suspect</code></li>
<li><code>alive -&gt; suspect</code>, with next <code><a href="../Enums/SWIM.html#/s:4SWIMAAO11Incarnationa">SWIM.Incarnation</a></code>, e.g. during flaky network situations, we suspect and un-suspect a node depending on probing</li>
<li><code>suspect -&gt; unreachable | alive</code>, if in SWIM terms, a node is &ldquo;most likely dead&rdquo; we declare it <code>.unreachable</code> instead, and await for high-level confirmation to mark it <code>.dead</code>.</li>
<li><code>unreachable -&gt; alive | suspect</code>, with next <code><a href="../Enums/SWIM.html#/s:4SWIMAAO11Incarnationa">SWIM.Incarnation</a></code> optional)</li>
<li><p><code>alive | suspect | unreachable -&gt; dead</code></p></li>
</ul><div class="aside aside-see-also">
    <p class="aside-title">See also</p>
    <p><code><a href="../Enums/SWIM.html#/s:4SWIMAAO11Incarnationa">SWIM.Incarnation</a></code></p>

</div>

                        <a href="../Enums/SWIM/Status.html" class="slightly-smaller">See more</a>
                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">enum</span> <span class="kt">Status</span> <span class="p">:</span> <span class="kt">Hashable</span></code></pre>
<pre class="highlight swift"><code><span class="kd">extension</span> <span class="kt"><a href="../Enums/SWIM.html">SWIM</a></span><span class="o">.</span><span class="kt">Status</span><span class="p">:</span> <span class="kt">Comparable</span></code></pre>

                        </div>
                      </div>
                      <div class="slightly-smaller">
                        <a href="https://github.com/apple/swift-cluster-membership/blob/0.0.0/Sources/SWIM/Status.swift#L39-L59">Show on GitHub</a>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
          </div>
        </section>

      </article>
    </div>
    <section class="footer">
      <p>&copy; 2020 <a class="link" href="https://github.com/apple/swift-cluster-membership" target="_blank" rel="external">Swift Cluster Membership Team</a>. All rights reserved. (Last updated: 2020-08-27)</p>
      <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.13.3</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external">Realm</a> project.</p>
    </section>
  </body>
</div>
</html>
